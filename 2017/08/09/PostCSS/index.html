<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>PostCSS简介 | Bowiego的啵客儿 | 龟速建设ing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="theme-color" content="#bee0dd">
  
  
  <meta name="keywords" content="技术,笔记">
  <meta name="description" content="1、什么是PostCSS (A tool for transforming CSS with JavaScript)

PostCSS 本身是一个功能比较单一的工具。它提供了一种方式用 JavaScript 代码来处理 CSS。它负责把 CSS 代码解析成抽象语法树结构（Abstract Syntax Tree，AST），再交由插件来进行处理。插件基于 CSS 代码的 AST 所能进行的操作是多种">
<meta property="og:type" content="article">
<meta property="og:title" content="PostCSS简介">
<meta property="og:url" content="http://bowiego.github.io/2017/08/09/PostCSS/index.html">
<meta property="og:site_name" content="Bowiego的啵客儿">
<meta property="og:description" content="1、什么是PostCSS (A tool for transforming CSS with JavaScript)

PostCSS 本身是一个功能比较单一的工具。它提供了一种方式用 JavaScript 代码来处理 CSS。它负责把 CSS 代码解析成抽象语法树结构（Abstract Syntax Tree，AST），再交由插件来进行处理。插件基于 CSS 代码的 AST 所能进行的操作是多种">
<meta property="og:updated_time" content="2017-08-09T15:50:19.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PostCSS简介">
<meta name="twitter:description" content="1、什么是PostCSS (A tool for transforming CSS with JavaScript)

PostCSS 本身是一个功能比较单一的工具。它提供了一种方式用 JavaScript 代码来处理 CSS。它负责把 CSS 代码解析成抽象语法树结构（Abstract Syntax Tree，AST），再交由插件来进行处理。插件基于 CSS 代码的 AST 所能进行的操作是多种">
  
    <link rel="alternative" href="/atom.xml" title="Bowiego的啵客儿" type="application/atom+xml">
  
  <meta name="summary" content="null">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="loading" class="active"></div>

  <nav id="menu" class="hide" class="hide" >
   <div class="inner flex-row-vertical">
  <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
      <i class="icon icon-lg icon-close"></i>
  </a>
  <div class="brand-wrap">
    <div class="brand">
      <a href="/" class="avatar"><img src="/img/logo.jpg"></a>
      <hgroup class="introduce">
        <h5 class="nickname">Bowiego "啵一哥"</h5>
        <a href="mailto:undefined" title="295030485@qq.com" class="mail">295030485@qq.com</a>
      </hgroup>
    </div>
  </div>
  <ul class="nav flex-col">
    
        <li class="waves-block waves-effect">
          <a class="hide" href="/"  >
            <i class="icon icon-lg icon-home"></i>
            主页
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a class="hide" href="/archives"  >
            <i class="icon icon-lg icon-archives"></i>
            文章
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a class="hide" href="/works/my%20profile/index.html" target="_blank" >
            <i class="icon icon-lg icon-works"></i>
            About
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a class="hide" href="https://github.com/bowiego" target="_blank" >
            <i class="icon icon-lg icon-github"></i>
            Github
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a class="hide" href="http://www.weibo.com/u/5866431080?refer_flag=1005050005_&is_all=1" target="_blank" >
            <i class="icon icon-lg icon-weibo"></i>
            Weibo
          </a>
        </li>
    
  </ul>

  <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>Bowiego的啵客儿 &copy; 2018</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

</div>

  </nav>
  <main id="main">
    <header class="header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">PostCSS简介</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input " autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header">
  <div class="container">
    <h1 class="author">PostCSS简介</h1>
    <h5 class="subtitle">
          
            <time datetime="2017-08-09T12:30:53.000Z" itemprop="datePublished" class="page-time">
  2017-08-09
</time>

 
        
    </h5>
  </div>
</header>

    <div class="container body-wrap">
      <article id="新文章-PostCSS" 
  class="article article-type-新文章" itemprop="blogPost">
    <div class="post-meat flex-row">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>

    </div>
    <div class="post-body">
        <aside class="post-widget" id="post-widget">

            
            <div class="post-share" id="post-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>

            

            
            <nav class="post-toc-wrap" id="post-toc">
            
            </nav>
            
        </aside>

        <div class="post-main">

            <div class="post-content" id="post-content" itemprop="postContent">
            <p><strong><em>1、什么是PostCSS (A tool for transforming CSS with JavaScript)</em></strong></p>
<blockquote>
<p>PostCSS 本身是一个功能比较单一的工具。它提供了一种方式用 JavaScript 代码来处理 CSS。它负责把 CSS 代码解析成抽象语法树结构（Abstract Syntax Tree，AST），再交由插件来进行处理。插件基于 CSS 代码的 AST 所能进行的操作是多种多样的，比如可以支持变量和混入（mixin），增加浏览器相关的声明前缀，或是把使用将来的 CSS 规范的样式规则转译（transpile）成当前的 CSS 规范支持的格式。从这个角度来说，PostCSS 的强大之处在于其不断发展的插件体系。目前 PostCSS 已经有 200 多个功能各异的插件。开发人员也可以根据项目的需要，开发出自己的 PostCSS 插件。</p>
<p>PostCSS 从其诞生之时就带来了社区对其类别划分的争议。这主要是由于其名称中的 post，很容易让人联想到 PostCSS 是用来做 CSS 后处理（post-processor）的，从而与已有的 CSS 预处理（pre-processor）语言，如 SASS 和 LESS 等进行类比。实际上，PostCSS 的主要功能只有两个：第一个就是前面提到的把 CSS 解析成 JavaScript 可以操作的 AST，第二个就是调用插件来处理 AST 并得到结果。因此，不能简单的把 PostCSS 归类成 CSS 预处理或后处理工具。PostCSS 所能执行的任务非常多，同时涵盖了传统意义上的预处理和后处理。</p>
<p>如果你喜欢使用PostCSS，但又不想抛弃你最喜欢的预处理器。不用担心，你不需要作出二选一的选择，你可以把PostCSS和预处理器(Sass、Stylus或LESS)结合起来使用。</p>
</blockquote>
<p><strong><em>2、为什么要用PostCSS</em></strong></p>
<ul>
<li><p>多样化的功能插件，创建了一个生态的插件系统</p>
</li>
<li><p>根据你需要的特性进行模块化</p>
</li>
<li><p>快速编译</p>
</li>
<li><p>创建自己的插件，且具可访问性</p>
</li>
<li><p>可以像普通的CSS一样使用它</p>
</li>
<li><p>不依赖于任何预处理器就具备创建一个库的能力</p>
</li>
<li><p>可以与许多流行工具构建无缝部署</p>
</li>
</ul>
<p><strong><em>3、webpack设置</em></strong></p>
<p>首先安装：</p>
<pre><code>npm install postcss-loader -D
</code></pre><blockquote>
<p>webpack &gt;3.0版本貌似不需要在配置文件中配置postcss的loader了，而是直接生效。也许是postcss新版的功能，但是官方文档没有说明，这点注意。</p>
<p>之后会在项目根目录下多处一个.postcssrc.js文件，以后在该文件中修改postcss配置</p>
</blockquote>
<pre><code>module.exports = {
 &quot;plugins&quot;: {
   &quot;autoprefixer&quot;: {
      browsers: [&apos;last 2 versions&apos;, &apos;ie 6-8&apos;, &apos;Firefox &gt; 20&apos;]
   },
   &quot;postcss-px-to-viewport&quot;: {
      viewportWidth: 750,
      viewportHeight: 1334,
      unitPrecision: 5,
      viewportUnit: &apos;vw&apos;,
      selectorBlackList: [],
      minPixelValue: 1,
      mediaQuery: false
     }
   }
}
</code></pre><p> <strong><em>2、PostCSS插件</em></strong></p>
<blockquote>
<p>PostCSS的核心就是它的插件系统。目前，PostCSS已经拥有200多个插件可供选择，官方的Github上有一个<a href="https://github.com/postcss/postcss#plugins" target="_blank" rel="external">插件仓库</a>,其主页维护了插件列表。这个插件列表会经常更新，所以说这个地方是一个相当可靠的地方，可以看到插件的发展，在哪方面可用。</p>
</blockquote>
<p>下面列举一些常用的插件：</p>
<p><a href="https://github.com/postcss/autoprefixer" target="_blank" rel="external"><strong>Autoprefixer</strong></a></p>
<blockquote>
<p>根据CanIUse.com数据对属性自动添加浏览器的私有前缀.</p>
</blockquote>
<pre><code>npm install autoprefixer -D
</code></pre><p>input:</p>
<pre><code>:fullscreen a {
  display: flex
}
</code></pre><p>output:</p>
<pre><code>:-webkit-full-screen a {
  display: -webkit-box;
  display: flex
}
:-moz-full-screen a {
  display: flex
}
:-ms-fullscreen a {
  display: -ms-flexbox;
  display: flex
}
:fullscreen a {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex
}
</code></pre><p><a href="https://github.com/ben-eb/cssnano" target="_blank" rel="external"><strong>cssnano</strong></a></p>
<blockquote>
<p>模块化的CSS压缩器,它提供了一个非常强大的CSS优化的插件包cssnano，这个插件包是一个可以即插即用的。它汇集了大约25个插件，只需要执行一个命令，就可以做多方面不同类型的优化。它包括：</p>
</blockquote>
<ul>
<li><p>删除空格和最后一个分号</p>
</li>
<li><p>删除注释</p>
</li>
<li><p>优化字体权重</p>
</li>
<li><p>丢弃重复的样式规则</p>
</li>
<li><p>优化calc()</p>
</li>
<li><p>压缩选择器</p>
</li>
<li><p>减少手写属性</p>
</li>
<li><p>合并规则</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install cssnano -D</div></pre></td></tr></table></figure>
<p>before:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">/* normalize selectors */</div><div class="line">h1::before, h1:before &#123;</div><div class="line">  /* reduce shorthand even further */</div><div class="line">  margin: 10px 20px 10px 20px;</div><div class="line">  /* reduce color values */</div><div class="line">  color: #ff0000;</div><div class="line">  /* remove duplicated properties */</div><div class="line">  font-weight: 400;</div><div class="line">  font-weight: 400;</div><div class="line">  /* reduce position values */</div><div class="line">  background-position: bottom right;</div><div class="line">  /* normalize wrapping quotes */</div><div class="line">  quotes: &apos;«&apos; &quot;»&quot;;</div><div class="line">  /* reduce gradient parameters */</div><div class="line">  background: linear-gradient(to bottom, #ffe500 0%, #ffe500 50%, #121 50%, #121 100%);</div><div class="line">  /* replace initial values */</div><div class="line">  min-width: initial;</div><div class="line">&#125;</div><div class="line">/* correct invalid placement */</div><div class="line">@charset &quot;utf-8&quot;;</div></pre></td></tr></table></figure></p>
<p>after:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@charset &quot;utf-8&quot;;h1:before&#123;margin:10px 20px;color:red;font-weight:400;background-position:100% 100%;quotes:&quot;«&quot; &quot;»&quot;;background:linear-gradient(180deg,#ffe500,#ffe500 50%,#121 0,#121);min-width:0&#125;</div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/MoOx/postcss-cssnext" target="_blank" rel="external"><strong>CSSNext</strong></a></p>
<blockquote>
<p>CSS4 很快就会到来，它会带来一些新的特性，包括本地变量、自定义媒体查询、自定义的选择器 和新的pseudo-links。虽然写本文的时候 CSS4 还没有被所有浏览器支持，不过它被批准后肯定会被最新的浏览器支持的。</p>
<p>CSSNext 可以把所有 CSS4 特性转换成浏览器可以识别的 CSS3 代码。这个工具可以单独使用，也可以作为 PostCSS 的一个插件。我们可以将其加到 processorsArray，这个数组包含了其他的 PostCSS 插件。</p>
</blockquote>
<p><code>reduced calc()</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">:root &#123;</div><div class="line">  --fontSize: 1rem;</div><div class="line">&#125;</div><div class="line"></div><div class="line">h1 &#123;</div><div class="line">  font-size: calc(var(--fontSize) * 2);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>media queries ranges</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@media (width &gt;= 500px) and (width &lt;= 1200px) &#123;</div><div class="line">  /* your styles */</div><div class="line">&#125;</div><div class="line"></div><div class="line">/* or coupled with custom media queries */</div><div class="line">@custom-media --only-medium-screen (width &gt;= 500px) and (width &lt;= 1200px);</div><div class="line"></div><div class="line">@media (--only-medium-screen) &#123;</div><div class="line">  /* your styles */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>image-set() function</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.foo &#123;</div><div class="line">  background-image: image-set(url(img/test.png) 1x,</div><div class="line">                              url(img/test-2x.png) 2x,</div><div class="line">                              url(my-img-print.png) 600dpi);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>


            </div>
            
<nav class="post-nav">
  
    <div class="waves-block waves-effect prev fl">
      <a href="/2018/05/15/云服务器搭建node服务/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">在云服务器上搭建nodejs服务</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next fr">
      <a href="/2016/09/02/Linux命令行笔记/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Linux命令行笔记</h4>
      </a>
    </div>
  
</nav>


            
            
<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="PostCSS" data-title="PostCSS简介" data-url="http://bowiego.github.io/2017/08/09/PostCSS/index.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"bowiego"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>





        </div>
    </div>
</article>
      <ul class="ds-recent-visitors" data-num-items="28" data-avatar-size="42" id="ds-recent-visitors"></ul>
    </div>
    </br>
    </br>
    </br>
  </main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<script>
var BLOG_SHARE = {
    title: "PostCSS简介",
    pic: "/img/logo.jpg",
    summary: document.getElementsByName('summary')[0].content,
    url: "http://bowiego.github.io/2017/08/09/PostCSS/index.html"
};
</script>
<div class="global-share" id="global-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>



<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script src="/js/main.js"></script>



<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<script type="text/template" id="search-tpl">
<li class="item">
    <a href="/{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</script>

<script src="/js/search.js"></script>












<script type="text/javascript">
var duoshuoQuery = {short_name:"bowiego"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>

</body>
</html>
